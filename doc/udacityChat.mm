<map version="0.9.0">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node CREATED="1348987526368" ID="ID_1532932936" MODIFIED="1348989980109" TEXT="udacityChat">
<edge STYLE="sharp_bezier"/>
<node CREATED="1348989990939" ID="ID_1987313413" MODIFIED="1348989994586" POSITION="right" TEXT="server">
<node CREATED="1348987580903" HGAP="32" ID="ID_1829381484" MODIFIED="1348990848862" TEXT="2 databases" VSHIFT="-37">
<edge STYLE="sharp_bezier"/>
<node CREATED="1348987605075" ID="ID_1733712805" MODIFIED="1348989716087" TEXT="ChatUser">
<edge STYLE="sharp_bezier"/>
<node CREATED="1348987785207" ID="ID_1148902882" MODIFIED="1348989716086" TEXT="properties">
<edge STYLE="sharp_bezier"/>
<node CREATED="1348987792371" ID="ID_1646237455" MODIFIED="1348989716086" TEXT="username">
<edge STYLE="sharp_bezier"/>
</node>
<node CREATED="1348987800171" ID="ID_1366885224" MODIFIED="1348989716086" TEXT="joined">
<edge STYLE="sharp_bezier"/>
</node>
<node CREATED="1348987818885" ID="ID_1244071601" MODIFIED="1348989716086" TEXT="identifier">
<edge STYLE="sharp_bezier"/>
</node>
<node CREATED="1348987823321" ID="ID_1405141310" MODIFIED="1348989716086" TEXT="startingchannel">
<edge STYLE="sharp_bezier"/>
</node>
<node CREATED="1348987825324" ID="ID_1764021326" MODIFIED="1348989716086" TEXT="channels">
<edge STYLE="sharp_bezier"/>
</node>
<node CREATED="1348987830546" ID="ID_4431866" MODIFIED="1348989716085" TEXT="contacts">
<edge STYLE="sharp_bezier"/>
</node>
<node CREATED="1348987842561" ID="ID_167558366" MODIFIED="1348989716085" TEXT="connected">
<edge STYLE="sharp_bezier"/>
</node>
</node>
<node CREATED="1348989371387" ID="ID_1496442210" MODIFIED="1348989716085" TEXT="methods">
<edge STYLE="sharp_bezier"/>
<node CREATED="1348989418098" ID="ID_1004825324" MODIFIED="1348989716085" TEXT="store">
<edge STYLE="sharp_bezier"/>
<node CREATED="1348989438159" ID="ID_1480827638" MODIFIED="1348989716085" TEXT="store user">
<edge STYLE="sharp_bezier"/>
</node>
</node>
<node CREATED="1348989775331" ID="ID_489916105" MODIFIED="1348989861864" TEXT="contacts stuff">
<node CREATED="1348989443975" FOLDED="true" ID="ID_1390652859" MODIFIED="1348989835126" TEXT="get_contact_names">
<edge STYLE="sharp_bezier"/>
<node CREATED="1348989751299" ID="ID_1790107542" MODIFIED="1348989752981" TEXT="Get the usernames of this user&apos;s contacts"/>
</node>
<node CREATED="1348989836093" ID="ID_1587352664" MODIFIED="1348989836892" TEXT="add_contact"/>
<node CREATED="1348989847603" ID="ID_863258797" MODIFIED="1348989848232" TEXT="remove_contact"/>
</node>
<node CREATED="1348989864029" ID="ID_1887150413" MODIFIED="1348989884034" TEXT="user&apos;s channels stuff">
<node CREATED="1348989911415" ID="ID_1428735252" MODIFIED="1348989914349" TEXT="get_channel_names"/>
<node CREATED="1348989924202" ID="ID_35598484" MODIFIED="1348989925417" TEXT="add_channel"/>
<node CREATED="1348989932496" ID="ID_1513446453" MODIFIED="1348989933097" TEXT="remove_channel"/>
</node>
</node>
</node>
<node CREATED="1348987618434" ID="ID_1778162520" MODIFIED="1348989716084" TEXT="ChantChannel">
<edge STYLE="sharp_bezier"/>
<node CREATED="1348987868560" ID="ID_880521172" MODIFIED="1348990069696" TEXT="properties">
<edge STYLE="sharp_bezier"/>
<node CREATED="1348987872705" ID="ID_553110313" MODIFIED="1348989716084" TEXT="channelname">
<edge STYLE="sharp_bezier"/>
</node>
<node CREATED="1348987874797" ID="ID_1663944399" MODIFIED="1348989716084" TEXT="created">
<edge STYLE="sharp_bezier"/>
</node>
<node CREATED="1348987880235" ID="ID_300802151" MODIFIED="1348989716084" TEXT="users">
<edge STYLE="sharp_bezier"/>
</node>
</node>
<node CREATED="1348989948705" ID="ID_135272396" MODIFIED="1348989961830" TEXT="methods">
<node CREATED="1348989963902" ID="ID_230342470" MODIFIED="1348990076435" TEXT="store"/>
<node CREATED="1348990077603" ID="ID_837114816" MODIFIED="1348990084457" TEXT="get_user_names"/>
<node CREATED="1348990084865" ID="ID_727062673" MODIFIED="1348990089387" TEXT="add_user"/>
<node CREATED="1348990089906" ID="ID_78094592" MODIFIED="1348990093936" TEXT="remove_user"/>
</node>
</node>
</node>
<node CREATED="1348987665162" HGAP="52" ID="ID_1945223851" MODIFIED="1349247647231" TEXT="4 WSGIapps" VSHIFT="-37">
<node CREATED="1348987690694" ID="ID_138594491" MODIFIED="1348989716083" TEXT="Main">
<edge STYLE="sharp_bezier"/>
<node CREATED="1348990373832" ID="ID_310038112" MODIFIED="1348990377298" TEXT="login stuff"/>
</node>
<node CREATED="1348987695585" ID="ID_427062747" MODIFIED="1348989716083" TEXT="Communication">
<edge STYLE="sharp_bezier"/>
<node CREATED="1349011076969" ID="ID_883916289" MODIFIED="1349011098631" TEXT="recieve message from client">
<icon BUILTIN="info"/>
</node>
<node CREATED="1348990152871" ID="ID_654710558" MODIFIED="1348990192028" TEXT="Deals with chat traffic,and run commands"/>
<node CREATED="1348990209593" ID="ID_1070345832" MODIFIED="1348990894926" TEXT="commands">
<arrowlink COLOR="#0000cc" DESTINATION="ID_1089369388" ENDARROW="Default" ENDINCLINATION="6;-13;" ID="Arrow_ID_398714519" STARTARROW="None" STARTINCLINATION="-87;0;"/>
</node>
</node>
<node CREATED="1349012442535" ID="ID_447717968" MODIFIED="1349012458970" TEXT="handle login and logout">
<node CREATED="1348987706344" ID="ID_1746242789" MODIFIED="1349012460959" TEXT="Connect">
<edge STYLE="sharp_bezier"/>
<node CREATED="1348990600834" ID="ID_1327872655" MODIFIED="1348990732069" TEXT="identify client(user) id when connect and handle it"/>
<node CREATED="1349012485619" ID="ID_1195393693" MODIFIED="1349012486322" TEXT="user_join"/>
<node CREATED="1348992156117" ID="ID_1793069219" MODIFIED="1348992169846" TEXT="user.connected = True"/>
<node CREATED="1348993381175" ID="ID_1106125582" MODIFIED="1348993382615" TEXT="logging.info(&quot;Connected: &quot;+username)"/>
<node CREATED="1348993469993" ID="ID_790424506" MODIFIED="1348993470759" TEXT="logging.warning(&quot;End of CONNECT, %s&apos;s channels are: &quot;"/>
</node>
<node CREATED="1348987712116" ID="ID_543740102" MODIFIED="1349092456441" TEXT="Disconnect">
<edge STYLE="sharp_bezier"/>
<node CREATED="1348990600834" ID="ID_1166633946" MODIFIED="1348990755960" TEXT="identify client(user) id when disconnect and handle it"/>
<node CREATED="1349012506407" ID="ID_501097777" MODIFIED="1349012507080" TEXT="user_quit"/>
<node CREATED="1348993492227" ID="ID_1346072678" MODIFIED="1348993493349" TEXT="clear_user(username)"/>
<node CREATED="1348993511983" ID="ID_706600571" MODIFIED="1348993513142" TEXT="logging.info(&quot;Disconnected: &quot;"/>
</node>
</node>
</node>
<node CREATED="1348990807661" HGAP="53" ID="ID_1089369388" MODIFIED="1348990894926" TEXT="Commands from clients" VSHIFT="-6">
<node CREATED="1348990919304" ID="ID_819135519" MODIFIED="1348990923197" TEXT="user_join">
<node CREATED="1348990945551" ID="ID_1294839035" MODIFIED="1348990965194" TEXT="user join a channel"/>
<node CREATED="1348991011611" ID="ID_1233354239" MODIFIED="1348991013197" TEXT="channel.add_user"/>
<node CREATED="1348991020206" ID="ID_487061736" MODIFIED="1348991020777" TEXT="user.add_channel"/>
<node CREATED="1348991073671" ID="ID_1244678016" MODIFIED="1349010905865" TEXT="channel_api.send_message (USERS)">
<icon BUILTIN="info"/>
<node CREATED="1348991085878" ID="ID_1628693664" MODIFIED="1348991246458" TEXT="Tell the user who is in the channel"/>
</node>
<node CREATED="1348991254876" ID="ID_992950882" MODIFIED="1349010909215" TEXT="channel_api.send_message(JOINED)">
<icon BUILTIN="info"/>
<node CREATED="1348991280555" ID="ID_280307470" MODIFIED="1348991281322" TEXT="Tell the individual channel members that the new user joined"/>
</node>
<node CREATED="1348991900917" ID="ID_827938091" MODIFIED="1348991904451" TEXT="logging.warning(&quot;End of JOIN, %s&apos;s channels are: &quot;"/>
</node>
<node CREATED="1348991927863" ID="ID_988399179" MODIFIED="1348991929191" TEXT="user_leave">
<node CREATED="1348992072788" ID="ID_33164304" MODIFIED="1348992086669" TEXT="user leave a channel"/>
<node CREATED="1348991997008" ID="ID_555893849" MODIFIED="1348991998587" TEXT="channel.remove_user"/>
<node CREATED="1348992007972" ID="ID_1259876672" MODIFIED="1349010915439" TEXT="channel_api.send_message(LEFT)">
<icon BUILTIN="info"/>
<node CREATED="1348992042717" ID="ID_939296944" MODIFIED="1348992051447" TEXT="Tell the individual channel members that who left"/>
</node>
<node CREATED="1349098062024" ID="ID_43763237" MODIFIED="1349098071135" TEXT="channel_api.send"/>
</node>
<node CREATED="1348992096551" ID="ID_64778258" MODIFIED="1348992099628" TEXT="user_quit">
<node CREATED="1348992109345" ID="ID_1415915460" MODIFIED="1348992110498" TEXT="User has quit"/>
<node CREATED="1348992191763" ID="ID_1029639404" MODIFIED="1348992192369" TEXT="user.connected = False"/>
<node CREATED="1348992211682" ID="ID_440861291" MODIFIED="1348992280200" TEXT="every channel.remove_user(username)"/>
<node CREATED="1348992251348" ID="ID_1271632678" MODIFIED="1349010924919" TEXT="channel_api.send_message(QUIT)">
<icon BUILTIN="info"/>
<node CREATED="1348992270002" ID="ID_1586741914" MODIFIED="1348992274235" TEXT="Tell the individual channel members that who quit"/>
</node>
<node CREATED="1348992423842" ID="ID_1859398940" MODIFIED="1348992425462" TEXT="contact.remove_contact(username)">
<node CREATED="1348992440143" ID="ID_155015111" MODIFIED="1348993263685" TEXT="Remove the user from the user&apos;s contanct person&apos;s contacts"/>
</node>
<node CREATED="1348992594087" ID="ID_935396280" MODIFIED="1349092456441" TEXT="Let the disconnect handler deal with clearing the user object">
<arrowlink COLOR="#0000cc" DESTINATION="ID_543740102" ENDARROW="Default" ENDINCLINATION="309;176;" ID="Arrow_ID_199560709" STARTARROW="None" STARTINCLINATION="100;23;"/>
</node>
</node>
<node CREATED="1348992810273" ID="ID_1141478815" MODIFIED="1348992898479" TEXT="user_privmsg">
<node CREATED="1348992957961" ID="ID_32321274" MODIFIED="1348992959035" TEXT="Private message from one user to another"/>
<node CREATED="1348992967126" ID="ID_428107650" MODIFIED="1349092909184" TEXT="channel_api.send_message(PRIVMSG)">
<icon BUILTIN="info"/>
</node>
<node CREATED="1348993001544" ID="ID_637218183" MODIFIED="1349092906697" TEXT="channel_api.send_message(SENTMSG)">
<icon BUILTIN="info"/>
</node>
<node CREATED="1348993034210" ID="ID_1326920793" MODIFIED="1348993034763" TEXT="recipient.add_contact"/>
<node CREATED="1348993039793" ID="ID_286250528" MODIFIED="1348993040591" TEXT="user.add_contact"/>
</node>
<node CREATED="1348993201354" ID="ID_792000122" MODIFIED="1349003781854" TEXT="user_channelmsg">
<node CREATED="1348993204006" ID="ID_298896682" MODIFIED="1348993210180" TEXT="user talks in channel"/>
<node CREATED="1348993245614" ID="ID_752609077" MODIFIED="1349010968150" TEXT="channel_api.send_message(CHANNELMSG) ">
<icon BUILTIN="info"/>
<node CREATED="1348993266711" ID="ID_1866629833" MODIFIED="1348993281371" TEXT="sent this message to every user in this channel"/>
</node>
</node>
<node CREATED="1348993342192" ID="ID_1478820096" MODIFIED="1348993343246" TEXT="user_ping">
<node CREATED="1349010994940" ID="ID_678404020" MODIFIED="1349011004311" TEXT="channel_api.send_message(username, &quot;PONG &quot;+args)">
<icon BUILTIN="info"/>
</node>
</node>
<node CREATED="1348993350553" ID="ID_792813757" MODIFIED="1348993351573" TEXT="user_pong"/>
</node>
<node CREATED="1348993527406" HGAP="119" ID="ID_31520556" MODIFIED="1349003792203" TEXT="several functions" VSHIFT="-67">
<node CREATED="1348993559578" ID="ID_1861327424" MODIFIED="1348993561215" TEXT="user_key">
<node CREATED="1348993756503" ID="ID_939299846" MODIFIED="1348993850579" TEXT=" for key consistency"/>
<node CREATED="1348993759080" ID="ID_1707180914" MODIFIED="1348993781674" TEXT="work for memache"/>
</node>
<node CREATED="1348993622390" ID="ID_82634972" MODIFIED="1348993623179" TEXT="get_user">
<node CREATED="1348993639220" ID="ID_1669762603" MODIFIED="1348993640676" TEXT="Get a user from memcache or datastore, returns None if user does not exist"/>
</node>
<node CREATED="1348993647278" ID="ID_1999624088" MODIFIED="1348993648353" TEXT="clear_user">
<node CREATED="1348993658758" ID="ID_450982844" MODIFIED="1348993659943" TEXT="Removes a user from datastore and from memcache"/>
<node CREATED="1348993688973" ID="ID_261932111" MODIFIED="1348993689823" TEXT="logging.info(&quot;Removed &quot;"/>
</node>
<node CREATED="1348993655516" ID="ID_1328386307" MODIFIED="1348993799894" TEXT="channelkey">
<node CREATED="1348993843177" ID="ID_1669131525" MODIFIED="1348993844279" TEXT=" for key consistency"/>
<node CREATED="1348993814905" ID="ID_1350753946" MODIFIED="1348993833211" TEXT="work for memache"/>
<node CREATED="1349006168188" ID="ID_199644459" MODIFIED="1349092355846" TEXT="change channelkey to channel_key"/>
</node>
<node CREATED="1348993870757" ID="ID_562413780" MODIFIED="1349006189156" TEXT="get_channel">
<node CREATED="1348993889730" ID="ID_1902271314" MODIFIED="1348993891561" TEXT="Get a channel from memcache or datastore, returns None if channel does not exist"/>
</node>
<node CREATED="1348993910095" ID="ID_1451991820" MODIFIED="1348993911154" TEXT="clear_channel">
<node CREATED="1348993916627" ID="ID_951343040" MODIFIED="1348993917445" TEXT="Removes a channel from datastore and from memcache"/>
</node>
</node>
</node>
<node CREATED="1348988264090" ID="ID_964724731" MODIFIED="1349008705494" POSITION="left" STYLE="bubble" TEXT="client">
<edge STYLE="sharp_bezier"/>
<node CREATED="1349003902411" ID="ID_218931295" MODIFIED="1349003913990" TEXT="global var">
<node CREATED="1349003919387" ID="ID_605195143" MODIFIED="1349003922231" TEXT="username"/>
<node CREATED="1349003922710" ID="ID_525585646" MODIFIED="1349003924799" TEXT="token"/>
<node CREATED="1349003925103" ID="ID_169551760" MODIFIED="1349003945538" TEXT="server"/>
<node CREATED="1349003946400" ID="ID_1905031538" MODIFIED="1349003952397" TEXT="identifier"/>
<node CREATED="1349003953619" ID="ID_195844464" MODIFIED="1349003955431" TEXT="channels">
<node CREATED="1349003991596" ID="ID_1708047788" MODIFIED="1349004018525" TEXT="{&quot;channelname&quot;: {&quot;text&quot;: text, &quot;user&quot;: [user1, user2], &quot;tab&quot;: jQueryTab} }"/>
</node>
<node CREATED="1349003957506" ID="ID_1225225717" MODIFIED="1349003959206" TEXT="users">
<node CREATED="1349004041928" ID="ID_571723774" MODIFIED="1349004057468" TEXT="Users the user is in communication with.Format: {&quot;username&quot;: text}"/>
</node>
<node CREATED="1349003961206" ID="ID_1949287930" MODIFIED="1349003966720" TEXT="activeEntity"/>
</node>
<node CREATED="1349004556106" ID="ID_1315817069" MODIFIED="1349004561299" TEXT="openChannel">
<node CREATED="1349006304766" ID="ID_1524482153" MODIFIED="1349006361860" TEXT="channel here doesn&apos;t mean a chatting channel,the name is ambiguous,maybe replace it with something else">
<icon BUILTIN="idea"/>
</node>
<node CREATED="1349004565029" ID="ID_1492861646" MODIFIED="1349004719497" TEXT="socket.onopen"/>
<node CREATED="1349004726451" ID="ID_56040774" MODIFIED="1349004727343" TEXT="socket.onmessage"/>
<node CREATED="1349004733967" ID="ID_1621047107" MODIFIED="1349004734657" TEXT="socket.onerror"/>
<node CREATED="1349004740096" ID="ID_1047499409" MODIFIED="1349004741001" TEXT="socket.onclose"/>
</node>
<node CREATED="1349004911331" ID="ID_1295766811" MODIFIED="1349004925779" TEXT="callBack functions">
<node CREATED="1349004216811" ID="ID_1806521429" MODIFIED="1349004962604" TEXT="onOpen">
<node CREATED="1349004824486" ID="ID_1960884658" MODIFIED="1349004848366" TEXT="addchannel(server)"/>
</node>
<node CREATED="1349004212818" ID="ID_1019382649" MODIFIED="1349004967613" TEXT="onExit">
<node CREATED="1349004786913" ID="ID_1813990159" MODIFIED="1349004795011" TEXT="when window.onbeforeunload"/>
<node CREATED="1349008418531" ID="ID_531858716" MODIFIED="1349008420199" TEXT="sendMessage(&quot;QUIT&quot;)"/>
</node>
<node CREATED="1348988281987" ID="ID_1087037258" MODIFIED="1349004976558" TEXT="onMessage">
<edge STYLE="sharp_bezier"/>
<node CREATED="1348988288905" ID="ID_1373952700" MODIFIED="1348992898479" TEXT="PRIVMSG">
<edge STYLE="sharp_bezier"/>
<node CREATED="1349008773322" ID="ID_1565501878" MODIFIED="1349092696237" TEXT="Message from another @user;recipient side"/>
<node CREATED="1349008748158" ID="ID_1544098262" MODIFIED="1349008752095" TEXT="Format: PRIVMSG SENDER message-text"/>
<node CREATED="1349008489247" ID="ID_1104578423" MODIFIED="1349009437189" TEXT="addUserContent(sender, content-msg);"/>
</node>
<node CREATED="1348988302200" ID="ID_1366411099" MODIFIED="1348989716082" TEXT="SENTMSG">
<edge STYLE="sharp_bezier"/>
<node CREATED="1349008886838" ID="ID_13206499" MODIFIED="1349092878336" TEXT="A message sent by this user (server confirmation or error message);sender side"/>
<node CREATED="1349008898345" ID="ID_262687787" MODIFIED="1349008901981" TEXT="Format: SENTMSG RECIPIENT message-text"/>
<node CREATED="1349008909729" ID="ID_1701291959" MODIFIED="1349009425710" TEXT="addUserContent(recipient, content-msg);"/>
</node>
<node CREATED="1348988303664" ID="ID_250991676" MODIFIED="1348989716082" TEXT="CHANNELMSG">
<edge STYLE="sharp_bezier"/>
<node CREATED="1349008927105" ID="ID_1158826408" MODIFIED="1349008936935" TEXT="Message sent to a #channel which user is in"/>
<node CREATED="1349008956584" ID="ID_1949659737" MODIFIED="1349008959820" TEXT="Format: CHANNELMSG CHANNEL SENDER message-text"/>
<node CREATED="1349008968280" ID="ID_745164770" MODIFIED="1349009410490" TEXT="addChannelContent(channel, content-msg);"/>
</node>
<node CREATED="1348988308039" ID="ID_561683247" MODIFIED="1348989716082" TEXT="NOTICEINDENT">
<edge STYLE="sharp_bezier"/>
<node CREATED="1349009086542" ID="ID_152194959" MODIFIED="1349010111188" TEXT="maybe should not only in server">
<icon BUILTIN="idea"/>
</node>
<node CREATED="1349009077298" ID="ID_587282910" MODIFIED="1349009079123" TEXT="addChannelContent(server"/>
</node>
<node CREATED="1348988330189" ID="ID_729527592" MODIFIED="1348989716081" TEXT="NOTICE">
<edge STYLE="sharp_bezier"/>
<node CREATED="1349009108356" ID="ID_1763444635" MODIFIED="1349009109381" TEXT="Message from server"/>
<node CREATED="1349009116126" ID="ID_1468293718" MODIFIED="1349009119085" TEXT="Format: NOTICE notice-text"/>
<node CREATED="1349009143697" ID="ID_1616883243" MODIFIED="1349009145129" TEXT="addChannelContent(server"/>
</node>
<node CREATED="1348988335503" ID="ID_1795807639" MODIFIED="1348993104343" TEXT="USERS">
<edge STYLE="sharp_bezier"/>
<node CREATED="1349009158547" ID="ID_845906391" MODIFIED="1349009160021" TEXT="Format: USERS channel username1 username2 username3"/>
<node CREATED="1349009228599" ID="ID_1876625412" MODIFIED="1349009229807" TEXT="addUsernameToChannel"/>
</node>
<node CREATED="1348988356456" ID="ID_47384717" MODIFIED="1348993105767" TEXT="JOINED">
<edge STYLE="sharp_bezier"/>
<node CREATED="1349009238180" ID="ID_1660431017" MODIFIED="1349009239153" TEXT="Format: JOINED username channel"/>
<node CREATED="1349009260807" ID="ID_658751812" MODIFIED="1349009261369" TEXT="addUsernameToChannel"/>
<node CREATED="1349009268925" ID="ID_1681370661" MODIFIED="1349009365695" TEXT="addChannelContent(who joined)"/>
</node>
<node CREATED="1349156323347" ID="ID_1090180337" MODIFIED="1349156328751" TEXT="LEAVE">
<icon BUILTIN="idea"/>
<node CREATED="1349173829187" ID="ID_1841803905" MODIFIED="1349173835491" TEXT="remove current tab"/>
<node CREATED="1349173842586" ID="ID_731853951" MODIFIED="1349173844844" TEXT="Format: LEAVE username channel"/>
<node CREATED="1349173850366" ID="ID_1745931618" MODIFIED="1349173852038" TEXT="removeTab(channel);"/>
</node>
<node CREATED="1348988372846" ID="ID_270042929" MODIFIED="1348989716081" TEXT="LEFT">
<edge STYLE="sharp_bezier"/>
<node CREATED="1349009283019" ID="ID_193710202" MODIFIED="1349009284214" TEXT="Format: LEFT username channel"/>
<node CREATED="1349009303704" ID="ID_1570324433" MODIFIED="1349009304712" TEXT="removeUsernameFromChannel"/>
<node CREATED="1349009318105" ID="ID_830338332" MODIFIED="1349009352579" TEXT="addChannelContent(who left)"/>
</node>
<node CREATED="1348988374241" ID="ID_48691269" MODIFIED="1348993106807" TEXT="QUIT">
<edge STYLE="sharp_bezier"/>
<node CREATED="1349009463271" ID="ID_1669922998" MODIFIED="1349009464454" TEXT="User QUIT chat, so remove from all channels"/>
<node CREATED="1349009470039" ID="ID_226329091" MODIFIED="1349009470958" TEXT="Format: QUIT username"/>
<node CREATED="1349009524226" ID="ID_1876419489" MODIFIED="1349009544275" TEXT="to every channel the user in before">
<node CREATED="1349009514820" ID="ID_1233845067" MODIFIED="1349009563445" TEXT="addChannelContent(who left)"/>
</node>
<node CREATED="1349009607727" ID="ID_560837917" MODIFIED="1349009741694" TEXT="to the client if the client chant with user">
<node CREATED="1349009744520" ID="ID_322132374" MODIFIED="1349009751683" TEXT="addUserContent(he left)"/>
</node>
</node>
<node CREATED="1348988402581" ID="ID_908179998" MODIFIED="1348989716080" TEXT="ALIAS">
<edge STYLE="sharp_bezier"/>
<node CREATED="1349009765451" ID="ID_1548942786" MODIFIED="1349009777697" TEXT="enable user to change his name"/>
<node CREATED="1349009762930" ID="ID_725498022" MODIFIED="1349009764381" TEXT="Format: ALIAS oldname newname"/>
</node>
<node CREATED="1349004259077" ID="ID_1121562172" MODIFIED="1349004263092" TEXT="PING">
<node CREATED="1349009805689" ID="ID_957304964" MODIFIED="1349009811036" TEXT="Format: PING response-text"/>
<node CREATED="1349009819722" ID="ID_1206749568" MODIFIED="1349009830197" TEXT="sendMessage(&quot;PONG &quot;"/>
</node>
</node>
<node CREATED="1349004303353" ID="ID_1479822142" MODIFIED="1349009906878" TEXT="onError">
<icon BUILTIN="idea"/>
</node>
<node CREATED="1349004310821" ID="ID_1657105705" MODIFIED="1349009909470" TEXT="onClose">
<icon BUILTIN="idea"/>
</node>
</node>
<node CREATED="1349005012020" ID="ID_1084097710" MODIFIED="1349005018654" TEXT="base functions">
<node CREATED="1349008343968" ID="ID_1510855853" MODIFIED="1349008345708" TEXT="chatScrollBottom"/>
<node CREATED="1349005050333" ID="ID_1143549104" MODIFIED="1349005062674" TEXT="sendMessage">
<node CREATED="1349005068983" ID="ID_531840176" MODIFIED="1349005085726" TEXT="send message to server"/>
<node CREATED="1349005099822" ID="ID_271388670" MODIFIED="1349005121152" TEXT="replace xhr to jQuery.ajax()">
<icon BUILTIN="idea"/>
</node>
</node>
<node CREATED="1349005128790" ID="ID_1557720894" MODIFIED="1349005136558" TEXT="createTimestamp">
<node CREATED="1349005140286" ID="ID_463017352" MODIFIED="1349005154210" TEXT="Return a string of the timestamp &quot;YYYY/MM/DD HH:mm&quot;"/>
<node CREATED="1349005154803" ID="ID_1297411313" MODIFIED="1349005159610" TEXT="local time!"/>
</node>
<node CREATED="1349005214199" ID="ID_1281233580" MODIFIED="1349005222647" TEXT="addUsernameToChannel">
<node CREATED="1349005272834" ID="ID_1557223180" MODIFIED="1349005274060" TEXT="Adds a username to a channel that is being listened to"/>
<node CREATED="1349005297015" ID="ID_176189197" MODIFIED="1349005358161" TEXT="if username not in channel[&quot;users&quot;],add it "/>
<node CREATED="1349005364748" ID="ID_773096423" MODIFIED="1349005383207" TEXT="updateEntity,and retrun true"/>
</node>
<node CREATED="1349005292807" ID="ID_1465377122" MODIFIED="1349005400156" TEXT="removeUsernameToChannel">
<node CREATED="1349005467278" ID="ID_534809112" MODIFIED="1349005483112" TEXT="opponent with addUsernameToChannel"/>
<node CREATED="1349005508089" ID="ID_44306635" MODIFIED="1349006228610" TEXT="if user in channel[&quot;users&quot;],remove it">
<node CREATED="1349006248956" ID="ID_802852559" MODIFIED="1349006262844" TEXT="this statement need to check again">
<icon BUILTIN="idea"/>
</node>
</node>
<node CREATED="1349006237150" ID="ID_1116918247" MODIFIED="1349006238386" TEXT="updateEntity,and retrun true"/>
</node>
<node CREATED="1349007180259" ID="ID_1274714537" MODIFIED="1349007192902" TEXT="markupContent">
<node CREATED="1349007224774" ID="ID_1140041825" MODIFIED="1349007233259" TEXT="insert text and markup it"/>
</node>
<node CREATED="1349007265977" ID="ID_669547053" MODIFIED="1349007282780" TEXT="addChannelContent">
<node CREATED="1349007310927" ID="ID_1176352159" MODIFIED="1349007312056" TEXT="Adds content to a channel tab"/>
<node CREATED="1349007339593" ID="ID_1922857034" MODIFIED="1349007355703" TEXT="addChannel if channel not in channels"/>
<node CREATED="1349011809390" ID="ID_22131490" MODIFIED="1349011827213" TEXT="update channels[channel][text]"/>
<node CREATED="1349007362383" ID="ID_1073856356" MODIFIED="1349007368184" TEXT="updateEntity"/>
</node>
<node CREATED="1349008602391" ID="ID_1523454101" MODIFIED="1349008603695" TEXT="addUserContent">
<node CREATED="1349008640205" ID="ID_1990739174" MODIFIED="1349008641347" TEXT="Adds content to a user&apos;s tab"/>
<node CREATED="1349008649010" ID="ID_459616416" MODIFIED="1349008656413" TEXT="update global var users"/>
<node CREATED="1349011984600" ID="ID_1615645045" MODIFIED="1349012004314" TEXT="update the msgs "/>
<node CREATED="1349008658508" ID="ID_1171902808" MODIFIED="1349008662984" TEXT="updateEntity"/>
</node>
<node CREATED="1349007380856" ID="ID_251963958" MODIFIED="1349007385715" TEXT="addChannel">
<node CREATED="1349007405063" ID="ID_1863625561" MODIFIED="1349010014861" TEXT="add a channel to be listened to, adds tab as well"/>
</node>
<node CREATED="1349007416072" ID="ID_1662542217" MODIFIED="1349007416777" TEXT="addUser">
<node CREATED="1349007422323" ID="ID_1667212093" MODIFIED="1349007423188" TEXT="Add a user for private conversation"/>
<node CREATED="1349007456247" ID="ID_1320118971" MODIFIED="1349007457153" TEXT="users  = {&quot;username&quot;: &quot;chattext&quot;}"/>
<node CREATED="1349007461920" ID="ID_1130401863" MODIFIED="1349007467352" TEXT="addTab"/>
</node>
<node CREATED="1349010744616" ID="ID_1429034132" MODIFIED="1349010816442" TEXT="to modify html functions/stuff">
<node CREATED="1349007472012" ID="ID_1032216763" MODIFIED="1349010776161" TEXT="addTab">
<node CREATED="1349007613423" ID="ID_612614293" MODIFIED="1349007622630" TEXT="add a chat tab"/>
<node CREATED="1349007671895" ID="ID_308571274" MODIFIED="1349007675362" TEXT="Only go to tab if it is not a user message">
<node CREATED="1349007740357" ID="ID_47191722" MODIFIED="1349007746619" TEXT="activeEntity = tabName;"/>
<node CREATED="1349007754853" ID="ID_256686562" MODIFIED="1349007755978" TEXT=" updateEntity(tabName);"/>
</node>
<node CREATED="1349007761899" ID="ID_829509625" MODIFIED="1349007806914" TEXT="newTab.click">
<node CREATED="1349007812501" ID="ID_126819603" MODIFIED="1349007813576" TEXT="Handle click events for newtab"/>
</node>
<node CREATED="1349007845758" ID="ID_1397608696" MODIFIED="1349007854581" TEXT="return newTab"/>
</node>
<node CREATED="1349012317537" ID="ID_1002671377" MODIFIED="1349097985097" TEXT="removeTab">
<icon BUILTIN="idea"/>
</node>
<node CREATED="1349007843080" ID="ID_1030116168" MODIFIED="1349010797466" TEXT="updateEntity">
<node CREATED="1349011563160" ID="ID_1138763159" MODIFIED="1349011650064" TEXT="re render div#chatarea and  div#userarea and #spare"/>
<node CREATED="1349011657029" ID="ID_184373528" MODIFIED="1349011671063" TEXT="or highlight tab&apos;s name"/>
</node>
<node CREATED="1349007668291" ID="ID_1760497485" MODIFIED="1349010807360" TEXT="Client input stuff"/>
</node>
<node CREATED="1349007992014" ID="ID_440253038" MODIFIED="1349012052822" TEXT="slashCommand">
<node CREATED="1349008038782" ID="ID_403146997" MODIFIED="1349008041047" TEXT="HELP"/>
<node CREATED="1349008042231" ID="ID_507979610" MODIFIED="1349008043723" TEXT="W"/>
<node CREATED="1349008044242" ID="ID_501220250" MODIFIED="1349008046947" TEXT="MSG">
<node CREATED="1349010664558" ID="ID_1747234978" MODIFIED="1349010665953" TEXT="sendMessage(&quot;PRIVMSG &quot;"/>
</node>
<node CREATED="1349008052333" ID="ID_1355360115" MODIFIED="1349008053867" TEXT="JOIN">
<node CREATED="1349010684609" ID="ID_1963800223" MODIFIED="1349010685814" TEXT="sendMessage(&quot;JOIN &quot;"/>
</node>
<node CREATED="1349008054703" ID="ID_745731538" MODIFIED="1349008058112" TEXT="LEAVE">
<node CREATED="1349010703072" ID="ID_1230078249" MODIFIED="1349010704082" TEXT="sendMessage(&quot;LEAVE &quot;"/>
<node CREATED="1349156299817" ID="ID_436310496" MODIFIED="1349156316143" TEXT="onMessage(&quot;LEAVE&quot;)">
<icon BUILTIN="idea"/>
</node>
</node>
<node CREATED="1349008061146" ID="ID_334718332" MODIFIED="1349008063095" TEXT="QUIT">
<node CREATED="1349010717852" ID="ID_1232440905" MODIFIED="1349010718864" TEXT="sendMessage(&quot;QUIT&quot;);"/>
</node>
</node>
<node CREATED="1349008154559" ID="ID_960786233" MODIFIED="1349012051047" TEXT="helpMessages"/>
</node>
</node>
</node>
</map>
